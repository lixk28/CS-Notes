Table of Contens:
1. [Version Control](#version-control)
2. [History of git](#history-of-git)
3. [Git的特点和基本工作原理](#git的特点和基本工作原理)
   1. [对待数据的方式](#对待数据的方式)
   2. [操作的执行方式](#操作的执行方式)
   3. [数据的完整性](#数据的完整性)
   4. [一般只添加数据](#一般只添加数据)
4. [Git的3种状态](#git的3种状态)
5. [Git的安装及配置](#git的安装及配置)
   1. [Git的安装](#git的安装)
   2. [Git的配置](#git的配置)
6. [获取帮助](#获取帮助)


# Version Control

**版本控制**是一种记录一个或若干个文件内容变化，以便于将来查阅特定版本修订情况的系统。

版本控制系统：
- **本地版本控制系统(Local Version Control System)**：复制整个项目来保存不同的版本。
  
    <img src=image/2021-02-05_22-13.png width='80%' height='80%'>

- **集中化的版本控制系统(Centralized Version Control System, CVCS)**：用一个单一的集中管理的服务器，保存所有文件的修订版本，协同工作者们通过客户端连接这台服务器，取出文件或提交更新。
  
    <img src=image/2021-02-05_22-02.png width='80%'>

- **分布式版本控制系统(Distributed Version Control System, DVCS)**：客户端并不只提取最新版本的文件快照，而是把代码仓库完整地镜像下来，包括完整的历史记录。这样一来，任何一处协同工作用的服务器发生故障，事后都可以用任何一个镜像出来的本地仓库恢复。因为每一次的克隆操作，实际上都是一次对代码仓库的完整备份。

    <img src=image/2021-02-05_22-21.png width='80%' height='75%'>

更进一步，许多这类系统都可以指定和若干不同的远程代码仓库进行交互，这样就可以在同一个项目中，分别和不同工作小组的相互协作。


# History of git

这是一个勇者斗恶龙的故事。

Linux内核开源项目有着为数众多的参与者。绝大多数的Linux内核维护工作都花在了提交补丁和存档的繁琐事物上。

2002年，项目组开始使用BitKeeper来管理和维护代码。到了2005年，开发BitKeeper的商业公司与Linux内核开源社区的合作关系结束，收回了Linux内核社区免费使用BitKeeper的权利。（据说有很多瓜葛）

这就迫使Linux开源社区，特别是Linux的缔造者Linus Torvalds，基于使用BitKeeper时的经验教训，开发出自己的版本系统。他们的目标是：速度快，设计简单，对非线性开发模式的强力支持（允许成千上万个并行开发的分支），完全分布式，有能力高效管理像Linux内核一样的超大规模项目。

于是，Git在2005年诞生了。


# Git的特点和基本工作原理

## 对待数据的方式

Git和其他版本控制系统的主要差别在于Git对待数据的方式。

其他大部分系统以文件变更列表的方式存储信息，这类系统将它们存储的信息看作是一组基本文件和每个文件随时间逐步积累的差异。它们通常称为**基于差异(delta-based)**的版本控制。

<img src=image/2021-02-06_23-45.png>

而Git将数据看作是对小型文件系统的一系列快照。每当提交项目更新或者保存项目时，Git就会对项目的全部文件创建一个快照并保存这个快照的索引。如果文件没有修改，Git不再重新存储该文件，而是只保留一个链接指向之前存储的文件。Git对待数据更像是一个**快照流**。

<img src=image/2021-02-06_23-51.png>

## 操作的执行方式

在Git中的绝大多数操作都只需要访问本地文件和资源,一般不需要来自网络上其它计算机的信息。相对于几乎所有操作都依赖于网络的集中式版本控制系统，Git在这方面有着极大的优势。因为你在本地磁盘上就有项目完整的开发和维护历史。

比如说，要浏览项目的历史，Git不需要连接到服务器去查看，它只需要从本地数据库中读取。如果你需要查看当前版本与一个月前的版本之间引入的修改，Git会查找到一个月前的文件做一次本地的差异计算，而不是由远程服务器处理或从远程服务器拉回旧版本文件再来本地处理。

这意味着你在离线或者没有VPN时，几乎可以进行任何操作。你可以在没有网络的时候进行提交（到你的本地副本），直到有网络的时候再上传。

## 数据的完整性

Git中所有的数据在存储前都计算校验和，然后以校验和来引用。这意味着，不可能在Git不知情的情况下更改任何文件的内容或目录内容。

Git 用以计算校验和的机制叫做 SHA-1 散列(hash,哈希)。这是一个由 40 个十六进制字符(0-9 和 a-f)组成的字符串,基于 Git 中文件的内容或目录结构计算出来。

SHA-1 哈希看起来是样的：`24b9da6552252987aa493b52f8696cd6d3b00373`

## 一般只添加数据

执行的Git操作，一般只往Git数据库中添加数据。你很难使用Git从数据库中删除数据，也就是说Git几乎不会执行任何可能导致文件不可恢复的操作。


# Git的3种状态

Git有3种状态，你的文件可能处于其中之一：

- **已修改(modified)**：表示修改了文件，但还没有保存到数据库中。
- **已暂存(staged)**：表示对一个已修改文件的当前版本做了标记，使之包含在下次提交的快照中。
- **已提交(commited)**：表示数据已经安全地保存在本地数据库中。

这会让我们的Git项目拥有3个阶段：工作区，暂存区和Git目录。

- **工作区**：是对项目的某个版本独立提取出来的内容
- **暂存区**：是一个文件，保存了下次将要提交的文件列表信息，**一般在Git仓库目录中**。按照Git的术语叫做**索引**。
- **Git仓库目录**：是Git用来保存项目的元数据和对象数据库的地方。

<img src=image/2021-02-07_14-22.png>

Git的基本工作流程如下：

1. 在工作区中修改文件
2. 将你想要下次提交的更改选择性暂存，这样只会将更改的部分提交到暂存区
3. 提交更新，找到暂存区的文件，将快照永久性存储到Git目录

- 如果 Git 目录中保存着特定版本的文件,就属**已提交**状态。

- 如果文件已修改并放入暂存区,就属于**已暂存**状态。 

- 如果自上次检出后,作了修改但还没有放到暂存区域,就是**已修改**状态。


# Git的安装及配置

## Git的安装

安装Git(基于Debian的发行版，如Ubuntu)：
```bash
sudo apt install git-all
```
安装完毕后，用
```bash
git --version
```
查看Git的版本信息

<img src=image/2021-02-07_14-33.png>

## Git的配置

安装完Git后，要做的第一件事是设置你的用户名和邮件地址。这一点非常重要，因为每一个Git提交都会使用这些信息，它们会写入到你的每一次提交中，而且一旦设定后便不可更改：

设置你的用户名和邮箱：
```bash
git config --global user.name "Niklaus"
git config --global user.email niklausama@qq.com
```

然后你可以使用
```bash
git config --list
```
来查看当前Git能找到的所有配置

<img src=image/2021-02-07_14-39.png>

# 获取帮助

若你在使用Git时需要帮助，有三种等价的方法可以找到Git命令的综合手册：

```bash
git help <verb>
git <verb> --help
man git-<verb>
```

例如，想要获得`git config`命令的手册，执行：
```bash
git config --help
```

此外，如果你不需要全面的手册，只需要可用选项的快速参考，那么可以用`-h`选项获得更简单的help输出：

例如：
```bash
git add -h
```
