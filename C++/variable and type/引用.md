# 引用(reference)

---

## 1. 引用的定义

**引用(reference)** 是为一个**<u>已存在</u>**的变量另起一个名字，引用变量就是某个已存在变量的**<u>别名</u>**

定义引用类型变量的一般形式：

**数据类型 &引用变量名 = 已存在的变量名;**

~~~C++
int i = 0;
int &ri = i; // ri指向i（是i的别名）

int j = 1;
int &rj1 = j, &rj = j; //允许在一条语句中定义多个引用
~~~

ri 是 i 的一个引用，ri 与 i **绑定(bind)** 在一起

---

定义了一个引用之后，**<u>对该引用进行的所有操作都是在与之绑定的对象上进行的</u>**：

~~~C++
int Val = 1;
int &refVal = Val;

refVal = 2; //等价于 Val = 1
refVal *= refVal; //等价于 Val *= Val
~~~

为引用赋值，实际上是把值赋给了与引用绑定的对象

获取引用的值，实际上是获取了与引用绑定对象的值

~~~C++
int i = 0;
int &refi1 = i, &refi2 = i;
int j = 1;
refi1 = j; // 将 j 的值赋给与 refi1 绑定的对象
j = refi2; // j 的值被修改为与 refi2 绑定的对象的值

int k = 1;
int &refk1 = k;
int &refk2 = refk1; // refk2 绑定到与 refk2 绑定的对象上，即绑定到k上
~~~

---

**引用只能绑定在对象（变量）上，而不能与某个值或某个表达式的结果绑定，且绑定的对象的类型必须与其所能绑定的类型严格匹配**

~~~C++
int &refVal = 1; //错误：引用的初始值必须是一个对象

double Pi = 3.14;
int &refPi = Pi; //错误：引用的初始值必须与其绑定的类型匹配
~~~

---

## 2. 引用与指针的比较

+ **存在空指针，但不存在空引用**：引用必须被连接到一块合法的内存
+ **指针可以在定义时不被初始化，但引用<u>在定义时必须同时初始化</u>**：引用在创建时必须被初始化，而指针可以在任何时候被初始化
+ **指针可以更改指向的对象，但引用<u>只能与一个不变的对象绑定</u>**：引用一旦被初始化和一个对象绑定后，就不能更改与其绑定的对象

~~~C++
int i = 0;
int &ri1; // 报错：引用必须被初始化
~~~

---

## 3. 传引用参数

当函数的形参是引用类型时，我们说它对应的实参被**引用传递(passed by reference)**或者函数被**传引用调用(called by reference)**

~~~C++
void reset(int &n)
{
   n = 0;
}
// 实际程序中与n所绑定的对象的值被修改为0

void swap(int &x, int &y)
{
    int t;
    t = x;
    x = y;
    y = t;
}
// 实际程序中与x,y所绑定对象的值确实被调换
~~~

---

**使用引用形参返回多个值：**

一个函数只能有一个返回值，然而有时函数需要同时返回多个值