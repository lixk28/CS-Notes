1. [Rust环境配置](#rust环境配置)
2. [Cargo](#cargo)
3. [基础语法](#基础语法)
   1. [注释](#注释)
   2. [库](#库)
   3. [变量和常量](#变量和常量)
   4. [隐藏](#隐藏)
   5. [数据类型](#数据类型)
      1. [标量类型](#标量类型)
         1. [整型](#整型)
         2. [浮点型](#浮点型)
      2. [布尔类型](#布尔类型)
         1. [字符类型](#字符类型)
      3. [复合类型](#复合类型)
         1. [元组类型](#元组类型)
         2. [数组类型](#数组类型)
   6. [函数](#函数)
   7. [控制流](#控制流)
      1. [if表达式](#if表达式)
      2. [循环](#循环)

# Rust环境配置

在macOS或Linux系统下安装：
```
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

配置环境变量：
在`~/.bashrc`中添加环境变量`~/.cargo/bin`：
```
export PATH=$PATH:/home/lixk28/.cargo/bin
```
这样可以直接使用`rustc`，`cargo`，`rustup`等工具链。

Rust更新和迭代速度非常快，`rustup`用于管理rust版本。

更新：
```
rustup update
```

卸载：
```
rustup self uninstall
```

查看版本：
```
rustc --version
```

Rust源代码后缀`.rs`，编译命令：
```
rustc main.rs
```
Rust是一种预编译静态型语言，可以编译程序。


# Cargo

Cargo是Rust的构建系统和包管理器，可以构建项目，以及下载依赖。

创建项目：
```
cargo new hello
```
将会创建一个名为hello的目录：
```
.
├── - Cargo.toml
└── - src
    └── - main.rs
```

`Cargo.toml`是项目的配置文件，列出了项目名，版本，作者，Rust版本以及项目依赖。

构建项目：
```
cargo build hello
```
将会生成二进制可执行文件，以及在根目录创建`Cargo.lock`，该文件记录项目依赖的实际版本。

运行可执行文件：
```
cargo run
```

检查代码确保可以被编译：
```
cargo check
```


# 基础语法


## 注释

与C相同。
- 单行注释：`//`
- 多行注释：`/* */`


## 库

`use std::io`在程序的开头，表示使用`std`标准库中的`io`库。

如果没有用use显式使用，需要在程序中写明`std::io`。


## 变量和常量

用`let`声明变量，无需注明变量的类型，变量名前加`mut`是可变变量，没有是不可变变量。

Rust编译器保证，如果声明一个值不会变，它就真的不会变。这意味着当阅读和编写代码时，不需要追踪一个值如何和在哪可能会被改变，从而使得代码易于推导。

用`const`声明常量，而且必须注明常量的类型，不允许对常量使用`mut`。常量命名的规范时用下划线分隔的大写字母表示。

## 隐藏

我们可以定义一个与之前变量同名的新变量，而新变量会**隐藏(shadowing)**之前的变量。

重复使用`let`来多次隐藏。可以改变变量的值和类型。

注意到不能改变`let mut`声明的变量的类型，可变变量只能改变它的值。

## 数据类型

Rust是静态类型语言，在编译时必须知道所有变量的类型。

### 标量类型

Rust中的**标量(scalar)**类型：
- 整型
- 浮点型
- 布尔类型
- 字符类型

#### 整型

整型是没有小数部分的数字。

Rust中的整型：

| 长度   | 有符号  | 无符号  |
| ------ | ------- | ------- |
| 8bit   | `i8`    | `u8`    |
| 16bit  | `i16`   | `u16`   |
| 32bit  | `i32`   | `u32`   |
| 64bit  | `i64`   | `u64`   |
| 128bit | `i128`  | `u128`  |
| arch   | `isize` | `usize` |

Rust默认数字类型是`i32`。
有符号和无符号代表数字能否为负。`isize`和`usize`依赖于运行程序的计算机架构，64位架构则是64位，32位架构则是32位。

Rust中的数字字面值：

| 数字字面值                   | 例子        |
| ---------------------------- | ----------- |
| Decimal(十进制)              | 98_222      |
| Hex(十六进制)                | 0xff        |
| Octal(八进制)                | 0o77        |
| Binary(二进制)               | 0b1111_0000 |
| Byte(单字节字符)(仅限于`u8`) | b'A'        |

#### 浮点型

Rust中的浮点型：
- `f32`：单精度浮点数
- `f64`：双精度浮点数

Rust中浮点数采用 IEEE-754 表示，默认浮点类型是`f64`。

### 布尔类型

Rust中的布尔类型，用`bool`表示：
- `true`
- `false`

#### 字符类型

Rust中的字符类型，用`char`表示，用Unicode编码，占4个字节。
`char`用单引号`''`指定。而字符串用双引号`""`指定。

### 复合类型

Rust中的**复合(Compound)**类型：
- 元组(tuple)
- 数组(array)

#### 元组类型

元组将多个类型的值组合到一个复合类型。

元组的长度固定，在声明时指定。

用包含在圆括号中的逗号分隔的值列表来创建元组。元组的每一个位置都有一个类型，而且不必相同。

可以使用**模式匹配(pattern matching)**或索引来**解构(destructuring)**元组。

#### 数组类型

数组中每个元素的类型必须相同，数组长度固定，在声明时指定，不能更改。

可以指定数组元素的类型或初始值，以及元素的数量，然后列出数组的值。数组使用方括号声明。

访问数组元素用`[]`，指定索引。

Rust会检查数组越界的情况，如果越界，在运行时会报错。



## 函数

Rust代码中的函数和变量名命名使用*snake case*规范风格。
在*snake case*中，所有字母都是小写并使用下划线分隔单词。

Rust中函数定义的位置是随意的，可以在`main`函数之前，也可以在`main`函数之后。

Rust的函数定义以`fn`开头，并在函数名后跟一对圆括号，花括号内是函数体。

在圆括号内列出函数的参数，且必须声明每个参数的类型（即提供类型注解）。

函数可以向调用它的代码返回值，并不对返回值命名，但要使用箭头`->`声明它的类型。函数默认是没有返回值的。**在Rust中，函数的返回值默认等于函数体最后一个表达式的值。可以使用`return`提前返回。**

在Rust中，语句执行一些操作但不返回值，表达式计算并产生一个值。不能用`let`语句赋值给另一个变量。

在Rust中，函数调用是一个表达式，宏调用是一个表达式，代码块`{}`也是一个表达式。**注意Rust中表达式的结尾没有分号。**


```rust
fn main() {
    println!("Hello, Rust!");
}
```

定义函数用`fn`，`main`函数总是最先运行的代码。

`println!`是一个Rust宏，而`println`是一个函数。

`println!`支持格式化字符串，用`{}`作为占位符。

`!`意味着是宏。


## 控制流

### if表达式

`if`开头，后跟一个条件，不需要用圆括号，但条件必须是布尔值。
`else`提供当`if`为假时执行的代码块。
`else if`处理多个条件。

### 循环

`loop`创建无限循环，使用`ctrl+c`退出。

`break`退出循环，并可以在后面跟一个表达式返回一个值。

`while`后跟条件，当条件为真时执行循环体，否则退出。

`for`可以用来遍历集合中的元素。











